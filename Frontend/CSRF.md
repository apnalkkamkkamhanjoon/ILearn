# CSRF

> Cross Site Request Forgery(사이트 간 요청 위조)의 줄임말로 웹 취약점 중 하나다.
>
> 공격자가 희생자의 권한을 도용하여 특정 웹 사이트의 기능을 실행하게 할 수 있으며 이는 희생자의 의도와는 무관하게 이루어진다.

## 조건

> CSRF가 이루어지기 위해서는 조건이 만족되어야 한다.

- 희생자가 공격자가 만든 피싱사이트에 접속
- 희생자가 위조 요청을 보낼 사이트(상기한 페이스북, 인스타그램 등)에 로그인 되어 있을 것

## 대응

- CAPCHA 사용
  - 이미지를 보여주고 그 이미지에 해당하는 문자/숫자/그림이 아니라면 요청을 거부하기 때문에 CSRF 공격을 효과적으로 방어할 수 있는 방법이다.
- Referrer 검증법
  - 요청이 들어올 때 request의 header에 담겨있는 referrer 값을 확인하여 같은 도메인에서 보낸 요청인지 검증하여 차단하는 방법입니다. 거의 대부분의 경우는 이 referrer 검증법으로 공격을 방어할 수 있다.
- CSRF 토큰 사용
  - 사용자의 세션에 임의의 값을 저장하여 모든 요청마다 그 값을 포함하여 전송한다.
    그리고 요청이 들어올 때 마다 백엔드에서 세션에 저장된 값과 요청으로 전송된 값이 일치하는지 검증하여 방어하는 방법이다.
